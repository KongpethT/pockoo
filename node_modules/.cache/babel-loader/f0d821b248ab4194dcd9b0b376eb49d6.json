{"ast":null,"code":"var _jsxFileName = \"/home/kongpetht/workspace/pockoo/src/cpn/addBlog.js\",\n    _s = $RefreshSig$();\n\nimport { useRef, useState } from \"react\";\nimport \"../css/addBlog.css\";\nimport \"../css/form.css\";\nimport axios from \"axios\";\nimport Api from \"./API\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddBlog = props => {\n  _s();\n\n  const [getCode, setCode] = useState(null);\n  const [getTitle, setTitle] = useState(null);\n  const [getSelectedfile, setSelectedFile] = useState(null);\n  const [getImagName, setImageName] = useState(null);\n  const [getAuthor, setAuthor] = useState(null);\n  const [getCategory, setCategory] = useState(null);\n  const [getUrlImage, setUrlImage] = useState(null);\n  const imageRef = useRef(null);\n\n  if (getUrlImage === null) {\n    setUrlImage(\"image/bg/240x240.png\");\n  }\n\n  const onChanged = event => {\n    setSelectedFile(event.target.files[0]);\n    setImageName(\"/image/cover/\" + imageRef.current.value.substr(12));\n    const file = imageRef.current.files[0];\n\n    if (file) {\n      setUrlImage(URL.createObjectURL(file));\n    }\n  };\n\n  const add = () => {\n    if (!!getCode && !!getTitle && !!getSelectedfile) {\n      const data = new FormData();\n      data.append('file', getSelectedfile);\n      axios.post(Api.upload, data, {}).then(res => {\n        /*console.log(res.statusText)*/\n      });\n      axios.post(Api.dataBlogs, {\n        code: getCode,\n        title: getTitle,\n        author: getAuthor,\n        category: getCategory,\n        text: getImagName\n      });\n    }\n  };\n\n  console.log(getImagName);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"add-blog\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"add-blog\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E1A\\u0E25\\u0E47\\u0E2D\\u0E01\\u0E43\\u0E2B\\u0E21\\u0E48\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"items\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\u0E23\\u0E2B\\u0E31\\u0E2A *\",\n          onChange: e => {\n            setCode(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"items\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\u0E40\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07 *\",\n          onChange: e => {\n            setTitle(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"items\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\u0E1C\\u0E39\\u0E49\\u0E41\\u0E15\\u0E48\\u0E07\",\n          onChange: e => {\n            setAuthor(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"items\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\u0E2B\\u0E21\\u0E27\\u0E14\\u0E2B\\u0E21\\u0E39\\u0E48\",\n          onChange: e => {\n            setCategory(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-preview\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: getUrlImage,\n          alt: \"cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"items\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/png\",\n          ref: imageRef,\n          onChange: onChanged\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: add,\n          children: \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 24\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 13\n  }, this);\n};\n\n_s(AddBlog, \"dquMskdb0EzMzpGPHo10EljK6p0=\");\n\n_c = AddBlog;\nexport default AddBlog;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddBlog\");","map":{"version":3,"sources":["/home/kongpetht/workspace/pockoo/src/cpn/addBlog.js"],"names":["useRef","useState","axios","Api","AddBlog","props","getCode","setCode","getTitle","setTitle","getSelectedfile","setSelectedFile","getImagName","setImageName","getAuthor","setAuthor","getCategory","setCategory","getUrlImage","setUrlImage","imageRef","onChanged","event","target","files","current","value","substr","file","URL","createObjectURL","add","data","FormData","append","post","upload","then","res","dataBlogs","code","title","author","category","text","console","log","e"],"mappings":"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","sourcesContent":["import { useRef, useState } from \"react\"\r\nimport \"../css/addBlog.css\"\r\nimport \"../css/form.css\"\r\nimport axios from \"axios\"\r\nimport Api from \"./API\"\r\n\r\nconst AddBlog = (props) => {\r\n\r\n    const [getCode, setCode] = useState(null)\r\n    const [getTitle, setTitle] = useState(null)\r\n    const [getSelectedfile, setSelectedFile] = useState(null)\r\n    const [getImagName, setImageName] = useState(null)\r\n    const [getAuthor, setAuthor] = useState(null)\r\n    const [getCategory, setCategory] = useState(null)\r\n    const [getUrlImage, setUrlImage] = useState(null)\r\n    const imageRef = useRef(null)\r\n\r\n\r\n    if (getUrlImage === null) {\r\n        setUrlImage(\"image/bg/240x240.png\")\r\n    }\r\n    const onChanged = (event) => {\r\n        setSelectedFile(event.target.files[0])\r\n        setImageName(\"/image/cover/\" + imageRef.current.value.substr(12))\r\n        const file = imageRef.current.files[0]\r\n        if (file) {\r\n            setUrlImage(URL.createObjectURL(file))\r\n        }\r\n    }\r\n    const add = () => {\r\n        if (!!getCode && !!getTitle && !!getSelectedfile) {\r\n            const data = new FormData()\r\n            data.append('file', getSelectedfile)\r\n            axios.post(Api.upload, data, {\r\n            }).then(res => { /*console.log(res.statusText)*/})\r\n\r\n                axios.post(Api.dataBlogs, {\r\n                    code: getCode,\r\n                    title: getTitle,\r\n                    author: getAuthor,\r\n                    category: getCategory,\r\n                    text: getImagName\r\n                })\r\n            }\r\n    }\r\n        console.log(getImagName)\r\n\r\n        return (\r\n            <div className=\"add-blog\">\r\n                <form className=\"add-blog\">\r\n                    <div className=\"header-bar\">\r\n                        <h3>เพิ่มบล็อกใหม่</h3>\r\n                    </div>\r\n\r\n                    <p className=\"items\">\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"รหัส *\"\r\n                            onChange={(e) => { setCode(e.target.value) }}\r\n                        />\r\n                    </p>\r\n\r\n                    <p className=\"items\">\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"เรื่อง *\"\r\n                            onChange={(e) => { setTitle(e.target.value) }}\r\n                        />\r\n                    </p>\r\n                    <p className=\"items\">\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"ผู้แต่ง\"\r\n                            onChange={(e) => { setAuthor(e.target.value) }}\r\n                        />\r\n                    </p>\r\n\r\n                    <p className=\"items\">\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"หมวดหมู่\"\r\n                            onChange={(e) => { setCategory(e.target.value) }}\r\n                        />\r\n                    </p>\r\n                    <div className=\"image-preview\">\r\n                        <img src={getUrlImage} alt=\"cover\"></img>\r\n                    </div>\r\n                    <p className=\"items\">\r\n                        <input\r\n                            type=\"file\"\r\n                            accept=\"image/png\"\r\n                            ref={imageRef}\r\n                            onChange={onChanged}\r\n                        />\r\n                    </p>\r\n\r\n                    <p><button onClick={add}>เพิ่ม</button></p>\r\n                </form>\r\n            </div >\r\n        )\r\n    }\r\n\r\n    export default AddBlog\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}